import csvimport osimport codecsimport itertools as itimport numpy as npfrom fuzzywuzzy import fuzzfrom fuzzywuzzy import process from collections import defaultdictcsvname = raw_input('Enter name of your file: ')while (not os.path.isfile(csvname)):   print 'There is no file named', csvname  csvname = raw_input('Enter location and name of your file: ')csvfile=open(str(csvname), 'rb')print 'Processing...'   dictReader = csv.DictReader(x.replace('\000', '') for x in csvfile)TransDat = [row for row in dictReader] subj_uniqid = [(i['subject_id'],i['2013-11-17_notes_from_nature_calbug_classifications.csv0000644000000000000000025243157712242145566021747 0ustar  rootrootid']) for i in TransDat]newsubid=defaultdict(list)for k,v in subj_uniqid:  newsubid[k].append(v)TransDatDict = {}for item in TransDat:   name = item['2013-11-17_notes_from_nature_calbug_classifications.csv0000644000000000000000025243157712242145566021747 0ustar  rootrootid']   TransDatDict[name] = itemLocDict=defaultdict(list)for newsubid_key, newsubid_values in newsubid.iteritems():   for newsubid_value in newsubid_values:        try:            TransDatDict_value=TransDatDict[newsubid_value]           LocDict[newsubid_key].append(str(TransDatDict_value['Locality']))        except KeyError:            passnewsubsc=defaultdict(list)for LocDict_key,LocDict_values in LocDict.iteritems():      for a,b in zip(LocDict_values,LocDict_values[1:]) :         a=a.lower()         b=b.lower()         c=int(fuzz.ratio(str(a), str(b)))         newsubsc[LocDict_key].append(c)print '{:30} {:2} {:7} {:2} {:8} {:2} {:7}'.format('subject_id', '\t', '    length', '\t', 'avgmatch', '\t', 'stddev')for newsubsc_key, newsubsc_values in newsubsc.iteritems():        length=int(len(newsubsc_values))        avg=sum(newsubsc_values)/len(newsubsc_values)        stddev=np.std(newsubsc_values)        print '{:30} {:2} {:7} {:2} {:8} {:2} {:5.3f}'.format(str(newsubsc_key), '\t', length, '\t',avg, '\t', stddev)